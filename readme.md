
# SearchAgent

ä¸€ä¸ªåŸºäº **LangChain** + **SiliconFlow API** çš„ Agent-RAG åº”ç”¨ã€‚  
ç›®æ ‡ï¼šæ”¯æŒå¤šè½®æ¾„æ¸… â†’ å­ç›®æ ‡åˆ†è§£ â†’ å¹¶è¡Œæ£€ç´¢ â†’ é‡æ’è¿‡æ»¤ â†’ æœ€ç»ˆç”Ÿæˆå›ç­”ã€‚  

## workspace

ä¸€ä¸ªç»“æ„åŒ–çš„ã€åŠ¨æ€æ›´æ–°çš„æ•°å­—å·¥ä½œåŒºï¼Œç”¨äºåè°ƒå¤šä¸ªæ™ºèƒ½ä»£ç†ï¼ˆAgentï¼‰çš„å·¥ä½œã€‚ å®ƒä»¥JSONæ ¼å¼å®ç°ï¼Œå¹¶åŒ…å«ä¸¤ä¸ªæ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼š

*   **ç›®æ ‡ (Objective):** å­˜å‚¨ç”±å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åˆ†æå¹¶æ¸…æ™°åŒ–åçš„æœ€ç»ˆä»»åŠ¡ç›®æ ‡ã€‚
*   **èµ„æ–™ (Information):** å­˜å‚¨æ™ºèƒ½ä»£ç†ä¸ºå®Œæˆè¯¥ç›®æ ‡è€Œæ”¶é›†å¹¶ç­›é€‰å‡ºçš„æ‰€æœ‰ç›¸å…³ä¿¡æ¯ã€‚

æœ¬è´¨ä¸Šï¼ŒWorkspaceæ˜¯ä¸€ä¸ªä¸­å¿ƒæ¢çº½æˆ–å…±äº«çš„â€œè‰ç¨¿çº¸â€ã€‚å®ƒä¸ºæ•´ä¸ªç³»ç»Ÿæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„ä¿¡æ¯è§†å›¾ï¼Œä½¿å¾—ä¸åŒçš„æ™ºèƒ½ä»£ç†èƒ½å¤Ÿå›´ç»•ä¸€ä¸ªå…±åŒçš„ç›®æ ‡ï¼ŒæŒç»­åœ°è¿›è¡Œè¯„ä¼°ã€æ·»åŠ æ–°èµ„æ–™ï¼Œå¹¶æœ€ç»ˆç”Ÿæˆè¯¦ç»†çš„ç­”æ¡ˆã€‚

python -m scripts.quickstart

```mermaid
graph TD
    A[ç”¨æˆ·è¾“å…¥] --> B[Agent0: Intake<br/>ç†è§£ä¸æ”¹å†™ç›®æ ‡];

    B --> C{Agent1: Plan<br/>è§„åˆ’ä¸å†³ç­–};

    subgraph "ä¿¡æ¯æœé›†å¾ªç¯"
        direction LR
        C -- "ç”Ÿæˆå­ç›®æ ‡" --> D[Retriever<br/>æ‰§è¡Œç½‘ç»œæ£€ç´¢];
        D -- "è¿”å›åŸå§‹èµ„æ–™" --> E[Agent2: Filter<br/>ç­›é€‰ç›¸å…³ä¿¡æ¯];
        E -- "æ›´æ–°ä¿¡æ¯ä¸Šä¸‹æ–‡" --> C;
    end

    C -- "èµ„æ–™å·²å……è¶³" --> F[Agent3: Write<br/>ç”Ÿæˆæœ€ç»ˆå›ç­”];
    
    F --> G[æœ€ç»ˆå›ç­”];
```
---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
searchagent/
â”œâ”€ pyproject.toml           # Poetry é…ç½®ï¼ˆå¯é€‰ï¼‰
â”œâ”€ requirements.txt         # ä¾èµ–æ¸…å•
â”œâ”€ .env.example             # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€ app/
â”‚  â”œâ”€ config.py             # è¯»å– env / åˆå§‹åŒ– API key
â”‚  â”œâ”€ workspace.py          # Workspace å¯¹è±¡çš„ JSON ç®¡ç†
â”‚  â”œâ”€ schema.py             # Pydantic æ•°æ®æ¨¡å‹
â”‚  â”œâ”€ retrievers/           # å„ç±»æ£€ç´¢å™¨
â”‚  â”œâ”€ embeddings/           # SiliconFlow Embedding å°è£…
â”‚  â”œâ”€ llm/                  # SiliconFlow Chat å°è£…
â”‚  â”œâ”€ agents/               # Agent0~3 çš„é€»è¾‘
â”‚  â”œâ”€ pipelines/            # ä¸»å¾ªç¯æµç¨‹
â”‚  â”œâ”€ tools/                # ç½‘é¡µæ¸…æ´—ã€åˆ†å—å·¥å…·
â”‚  â”œâ”€ storage/              # å‘é‡åº“ä¸æœ¬åœ°å­˜å‚¨
â”‚  â””â”€ server/               # FastAPI æœåŠ¡ç«¯
â””â”€ scripts/                 # å¯åŠ¨è„šæœ¬ã€demo
```

---

## ğŸ”‘ ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` â†’ `.env` å¹¶å¡«å…¥ï¼š

```
SILICONFLOW_API_KEY=your_api_key
SILICONFLOW_BASE_URL=https://api.siliconflow.cn/v1
TAVILY_API_KEY=xxx   # æˆ– SERPER_API_KEY / JINA_API_KEY
```

---

## ğŸš§ å¼€å‘ä»»åŠ¡æ¢³ç†

### é˜¶æ®µ 1: åŸºç¡€è®¾æ–½
- [ ] å®Œæˆ `requirements.txt`ï¼Œç¡®ä¿ LangChain + SiliconFlow SDK + æœç´¢ API å¯è¿è¡Œ  
- [ ] åœ¨ `app/config.py` åŠ è½½ envï¼Œå°è£… SiliconFlow LLM/Embedding å®¢æˆ·ç«¯  
- [ ] å®ç° `workspace.py`ï¼Œæ”¯æŒ JSON è¯»å†™ã€è¿½åŠ èµ„æ–™  

### é˜¶æ®µ 2: æ ¸å¿ƒåŠŸèƒ½
- [ ] **Agent0**: æ ¹æ®ç”¨æˆ· query è‡ªåŠ¨ç”Ÿæˆæ¾„æ¸…é—®é¢˜  
- [ ] **Agent1**: åˆ¤æ–­ workspace æ˜¯å¦éœ€è¦æ›´å¤šèµ„æ–™ â†’ è¾“å‡ºå­ç›®æ ‡åˆ—è¡¨  
- [ ] **æ£€ç´¢å™¨**: æ¥å…¥ Tavily / Serper / Jina â†’ æ‹¿åˆ°å€™é€‰æ–‡æ¡£  
- [ ] **é‡æ’**: SiliconFlow `bge-reranker` å¯¹å€™é€‰æ–‡æ¡£æ’åº  
- [ ] **Agent2**: ç­›é€‰ä¿ç•™æ–‡æ¡£ï¼Œæ›´æ–° workspace  
- [ ] **Agent3**: æ±‡æ€»èµ„æ–™å¹¶å›ç­”ä¸»é—®é¢˜  

### é˜¶æ®µ 3: æ‰©å±•ä¸å·¥ç¨‹åŒ–
- [ ] æ”¯æŒæœ¬åœ°å‘é‡åº“ï¼ˆFaiss/Qdrantï¼‰  
- [ ] API æœåŠ¡ (`app/server/api.py`)ï¼šæä¾› `/query` `/workspace/{id}` `/feedback`  
- [ ] æ—¥å¿—ä¸è°ƒè¯•ï¼šåœ¨ pipeline ä¸­è®°å½•æ¯æ¬¡ agent å†³ç­–ä¸æ£€ç´¢ç»“æœ  
- [ ] Demo notebookï¼šå±•ç¤ºä» query â†’ workspace â†’ å›ç­”çš„å…¨æµç¨‹  

---

## ğŸ“Œ æ¥ä¸‹æ¥è¦åšçš„äº‹

1. å†™å¥½ `requirements.txt` å¹¶å®‰è£…ä¾èµ–  
2. åœ¨ `app/config.py` ä¸­å°è£… SiliconFlow Chat/Embedding è°ƒç”¨  
3. èµ·ä¸€ä¸ªæœ€å° demoï¼š  
   - è¾“å…¥ query  
   - Agent0 è¿½é—®ç”¨æˆ· â†’ æ”¹å†™ç›®æ ‡  
   - è°ƒç”¨æ£€ç´¢å™¨è¿”å›å€™é€‰æ–‡æ¡£  
   - Agent2 å…ˆç®€å•ä¿ç•™å…¨éƒ¨æ–‡æ¡£  
   - Agent3 ç”¨æ–‡æ¡£å†™å›ç­”  
4. è¿­ä»£å¢å¼ºï¼šåŠ ä¸Šå­ç›®æ ‡åˆ†è§£ã€å¹¶è¡Œæ£€ç´¢å’Œé‡æ’  
5. æœ€ååŠ ä¸Š FastAPI å°è£…ï¼Œæä¾› HTTP æœåŠ¡  

---

## ğŸ“ å¤‡æ³¨

- æœç´¢ API å¯å…ˆç”¨ Tavilyï¼ŒåæœŸå¯æ¢ Serper/Jina  
- Workspace JSON ä¿æŒç®€æ´ï¼Œå…ˆç”¨ `goal` + `docs`ï¼Œåç»­å†æ‰©å±•  
- å»ºè®®å¼€å‘è¿‡ç¨‹ä¸­ç”¨ notebook åšå¿«é€ŸéªŒè¯ï¼Œå†å†™å…¥ `pipelines/`  

```